## template for the whole bpmn document
<?xml version="1.0" encoding="UTF-8"?>
<definitions id="Definition"
             targetNamespace= "http://sourceforge.net/bpmn/definitions/_1421940801539"
             typeLanguage= "http://www.w3.org/2001/XMLSchema"
             expressionLanguage= "http://www.w3.org/1999/XPath"
             xmlns= "http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsd= "http://www.w3.org/2001/XMLSchema"
             xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation= "http://www.omg.org/spec/BPMN/20100524/MODEL http://bpmn.sourceforge.net/schemas/BPMN20.xsd">
           
<process id = "Process_1" isExecutable = "false" processType = "none" name = "ProcessName">

## nodes
	<startEvent id="_0001" name="StartProcess"/>

#foreach($node in $nodes)
	#foreach ($dbInputNode in $dbInputNodes)
		#if($node.id == $dbInputNode.id)
			#parse ( "vmTemplates/dbInputNode.vm" )
		#else
			#parse( "vmTemplates/node.vm" )
		#end
	#end
#end

<endEvent id="_0009" name="EndProcess">
 	<terminateEventDefinition/>
</endEvent>

## edges from start event
#foreach ( $source in $sources )
	#if ($source.size == 1)
		#parse ( "vmTemplates/start.vm" )
	#else
		#parse ( "vmTemplates/startWithGateway.vm" )
	#end
#end

#if ($divergingGateway == "Y")
<parallelGateway gatewayDirection="Diverging" id="_001" />
<sequenceFlow id="_0001-_001" sourceRef="_0001" targetRef="_001" />
#end

## middle edges
#foreach( $edge in $edges )
	#parse( "vmTemplates/edge.vm" )
#end 

## edges to end event
#foreach( $target in $targets )
	#if ($target.size == 1)
		#parse ( "vmTemplates/end.vm" )
	#else
		#parse ( "vmTemplates/endWithGateway.vm" )
	#end
#end 

#if ($convergingGateway == "Y")
<parallelGateway gatewayDirection="Converging" id="_009" />
<sequenceFlow id="_009-_0009" sourceRef="_009" targetRef="_0009" />
#end

</process>
#if ($database == "Y")
 <dataStore id="DS_1" isUnlimited="false" />
 #end
</definitions>